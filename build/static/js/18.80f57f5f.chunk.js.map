{"version":3,"sources":["components/sub-admin/activity/core/SearchLogic.js","components/sub-admin/activity/Activity.jsx"],"names":["SearchLogic","data","inputRef","useRef","useState","searchTerm","setSearchTerm","searchResults","setSearchResults","e","target","value","current","focus","result","filter","o","sn","toString","includes","key","toLowerCase","taskPerformed","registrationId","role","date","time","Activity","useParams","useQuery","adminActivities","status","error","payload","undefined","trails","map","item","index","performedBy","JSON","parse","trailUuid","util","dateFormat","dateAndTime","timeFormat","push","searchLogic","handleSearch","title","src","Pageview","className","SearchOutlined","type","ref","onChange","placeholder","columns","dataIndex","sorter","a","b","v1","v2","dataSource"],"mappings":"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","file":"static/js/18.80f57f5f.chunk.js","sourcesContent":["import { useState, useRef } from 'react';\r\n\r\nfunction SearchLogic(data) {\r\n  const inputRef = useRef(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const handleSearch = (e) => {\r\n    setSearchTerm(e.target.value);\r\n    if (searchTerm === '') {\r\n      inputRef.current.focus();\r\n    }\r\n\r\n    const result = data.filter(\r\n      (o) =>\r\n        o.sn.toString().includes(searchTerm.toString()) ||\r\n        o.key.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        o.taskPerformed.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        o.registrationId.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        o.role.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        o.date.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        o.time.toString().toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n    setSearchResults(result);\r\n  };\r\n\r\n  return [searchTerm, handleSearch, inputRef, searchResults];\r\n}\r\n\r\nexport default SearchLogic;\r\n","/* eslint-disable react/display-name */\r\nimport React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useQuery } from 'react-query';\r\nimport { SearchOutlined } from '@material-ui/icons';\r\n\r\nimport Pageview from '../../../lib/layout/Pageview';\r\nimport { ErrorPage } from '../../../lib/control/error-page/FallBack';\r\n\r\nimport { Table } from 'antd';\r\nimport searchLogic from './core/SearchLogic';\r\nimport { adminActivities } from '../../../lib/http/admin';\r\nimport util from '../../../lib/service/util';\r\nimport '../../../lib/style/shared-history.scss';\r\n\r\nfunction Activity() {\r\n  const { registrationId } = useParams();\r\n  const { status, error, data } = useQuery(['adminActivities', registrationId], () =>\r\n    adminActivities(registrationId)\r\n  );\r\n\r\n  let payload = [];\r\n  if (data !== undefined) {\r\n    data.data.data.trails.map((item, index) => {\r\n      const performedBy = JSON.parse(item.performedBy);\r\n      const value = {\r\n        key: item.trailUuid,\r\n        sn: index + 1,\r\n        taskPerformed: item.taskPerformed,\r\n        registrationId: performedBy.registrationId,\r\n        role: performedBy.role,\r\n        date: util.dateFormat(item.dateAndTime),\r\n        time: util.timeFormat(item.dateAndTime),\r\n      };\r\n\r\n      payload.push(value);\r\n    });\r\n  }\r\n\r\n  const [searchTerm, handleSearch, inputRef, searchResults] = searchLogic(payload);\r\n  const columns = [\r\n    {\r\n      title: 'S/N',\r\n      dataIndex: 'sn',\r\n      key: 'sn',\r\n      sorter: (a, b) => {\r\n        var v1 = a.sn;\r\n        var v2 = b.sn;\r\n        if (v1 < v2) {\r\n          return -1;\r\n        }\r\n        if (v1 > v2) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n\r\n    {\r\n      title: 'RegistrationId',\r\n      dataIndex: 'registrationId',\r\n      key: 'registrationId',\r\n      sorter: (a, b) => {\r\n        var v1 = a.registrationId;\r\n        var v2 = b.registrationId;\r\n        if (v1 < v2) {\r\n          return -1;\r\n        }\r\n        if (v1 > v2) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n\r\n    {\r\n      title: 'Task Performed',\r\n      dataIndex: 'taskPerformed',\r\n      key: 'taskPerformed',\r\n\r\n      sorter: (a, b) => {\r\n        var v1 = a.taskPerformed;\r\n        var v2 = b.taskPerformed;\r\n        if (v1 < v2) {\r\n          return -1;\r\n        }\r\n        if (v1 > v2) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n\r\n    {\r\n      title: 'Role',\r\n      dataIndex: 'role',\r\n      key: 'role',\r\n      // eslint-disable-next-line react/display-name\r\n      sorter: (a, b) => {\r\n        var v1 = a.role;\r\n        var v2 = b.role;\r\n        if (v1 < v2) {\r\n          return -1;\r\n        }\r\n        if (v1 > v2) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'date',\r\n      key: 'date',\r\n      sorter: (a, b) => {\r\n        var v1 = a.date;\r\n        var v2 = b.date;\r\n        if (v1 < v2) {\r\n          return -1;\r\n        }\r\n        if (v1 > v2) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n\r\n    {\r\n      title: 'Time',\r\n      dataIndex: 'time',\r\n      key: 'time',\r\n      sorter: (a, b) => {\r\n        var v1 = a.time;\r\n        var v2 = b.time;\r\n        if (v1 < v2) {\r\n          return -1;\r\n        }\r\n        if (v1 > v2) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n  ];\r\n\r\n  if (status !== 'success') {\r\n    return <ErrorPage status={status} error={error} title=\"Activities\" />;\r\n  }\r\n  const src = searchTerm === '' ? payload : searchResults;\r\n\r\n  return (\r\n    <Pageview title=\"Activities\" className=\"user-transactions\">\r\n      <div className=\"row shared-history\">\r\n        <div className=\"offset-md-2 col-md-8\">\r\n          <div className=\"search-wrapper\" data-aos=\"fade-down\">\r\n            <SearchOutlined />\r\n            <input\r\n              type=\"text\"\r\n              ref={inputRef}\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              placeholder=\"Search\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"table-responsive\">\r\n            <Table columns={columns} dataSource={src} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Pageview>\r\n  );\r\n}\r\n\r\nexport default Activity;\r\n"],"sourceRoot":""}